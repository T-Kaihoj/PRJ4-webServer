@{
    ViewData["Title"] = "Home Page";
}

@model  MVC.ViewModels.HomeViewModel

<div class="container">
    <div class="row">
        <h1>
            Home
        </h1><br />
        <div class="col-md-5">
            <h2 class="label" style="font-size: 20px; background-color: darkslategray">Welcome : @Model.Name </h2>  <br><br />
        </div>
        <div class="col-md-5">
            <h2 class="label" style="font-size: 18px; background-color: darkslategray">Your Balance is : @Model.CurrentBalance </h2>
        </div>
            <br /><br />

        </div>
    <div class="row">
        <div class="col-md-6" align="left">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    @* List Bets *@
                    <h3 class="panel-title">
                        Bets
                    </h3>
                </div>
                <div class="panel-body">
                    @if (Model.Bets.Any() || Model.BetsJudged.Any())
                    {
                        foreach (var b in Model.Bets)
                        {
                            <div class="row">
                                <div class="col-md-4">
                                    <h4>
                                        @b.Name
                                    </h4>
                                </div>
                                <div class="col-md-8">
                                    <!-- TODO: Only show when logged in user is owner of shown bet -->
                                    @if (b.Owner.Username == Model.Username)
                                    {
                                        @Html.ActionLink("Remove", "Remove", new { controller = "Bet", id = b.BetId }, new {@class = "btn btn-raised btn-warning" })

                                   }
                                    <label type="label" class="btn btn-default pull-right" aria-label="Left Align" data-toggle="tooltip" title="Entry fee @b.BuyIn">
                                        @b.BuyIn
                                    </label>
                                    <label type="label" class="btn btn-default pull-right" aria-label="Left Align" data-toggle="tooltip" title="Bet ends @b.StopDate">
                                        <span class="glyphicon glyphicon-time" aria-hidden="true"></span>
                                    </label>

                                </div>
                            </div>
                            <hr/>
                        }

                        foreach (var item in Model.BetsJudged)
                        {
                            <div class="row">
                                <div class="col-md-4">
                                    <h4>
                                        @item.Name
                                    </h4>
                                </div>
                                <div class="col-md-8">
                                    @if (item.Judge.Username == Model.Username)
                                            {
                                        <a href="/Bet/Conclude/@item.BetId" class="btn btn-raised btn-primary">Conclude</a>
                                        }
                                   <label type="label" class="btn btn-default pull-right" aria-label="Left Align" data-toggle="tooltip" title="Entry fee @item.BuyIn">
                                        @item.BuyIn
                                    </label>
                                    <label type="label" class="btn btn-default pull-right" aria-label="Left Align" data-toggle="tooltip" title="Bet ends @item.StopDate">
                                        <span class="glyphicon glyphicon-time" aria-hidden="true"></span>
                                    </label>

                                </div>
                            </div>
                            <hr />
                            
                        }

                    }
                    else
                    {
                        <p>You have no aktive bets</p>
                    }
                </div>

            </div>
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <h3 class="panel-title">
                        Invites
                    </h3>
                </div>
                <div class="panel-body">
                    @if (Model.InvitedToLobbies.Any())
                    {
                        foreach (var l in Model.InvitedToLobbies)
                        {
                            <div class="row">
                                <div class="col-md-6">
                                    <h4>
                                        @l.Name
                                    </h4>
                                </div>
                                <div class="col-md-6 text-md-right text-sm-left">
                                    <a href="#" class="btn btn-raised btn-info">Info</a>
                                    <a href="/Lobby/Accept/@l.LobbyId" class="btn btn-raised btn-primary">Accept</a>
                                </div>
                            </div>
                            <hr />
                        }
                    }
                    else
                    {
                        <p>You have no lobby invites</p>
                    }
                </div>
            </div>
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <h3 class="panel-title">
                        Friendlist
                        <span class="pull-right">
                            @Html.ActionLink("Add Friends", "Index", new { controller = "Friend" }, new { @class = "pull-right" })
                        </span>
                    </h3>
                </div>
                <div class="panel-body">
                    @if (Model.Friendlist.Any())
                    {
                        foreach (var f in Model.Friendlist)
                        {
                            <div class="row">
                                <div class="col-md-6">
                                    <h4>
                                        @f.FirstName @f.LastName
                                    </h4>
                                </div>
                                <div class="col-md-6 text-md-right text-sm-left">
                                    <a class="btn btn-raised btn-info" href="#">Info</a>
                                    <a class="btn btn-raised btn-info" href="#">messags</a>
                                </div>
                            </div>
                            <hr />
                        }
                    }
                    else
                    {
                        <p>You have no Friends</p>
                    }
                </div>
            </div>
        </div>
        <div class="col-md-6" align="left">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    @* List Joined lobbies *@
                    <h3 class="panel-title">
                        Lobbies
                    </h3>
                </div>
                <div class="panel-body">
                    @if (Model.MemberOfLobbies.Any())
                    {
                        foreach (var l in Model.MemberOfLobbies)
                        {
                            <div class="row">
                                <div class="col-md-6">
                                    <h4>
                                        @l.Name
                                    </h4>
                                </div>
                                <div class="col-md-6 text-md-right text-sm-left">
                                    <a href="/Lobby/Show/@l.LobbyId" class="btn btn-raised btn-info">View</a>
                                    
                                </div>
                            </div>
                            <hr />
                        }
                    }
                    else
                    {
                        <p>You are not member of any lobbies </p>
                    }
                </div>
            </div>
        </div>
    </div>
</div>
